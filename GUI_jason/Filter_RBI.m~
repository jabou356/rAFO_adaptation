
function fdata = FilterRBI(data,windowlength,type,dim)
% This function do a Rectified bin averaging filtering of EMG data
%Inputs: data: 2d or 3d Data tables
% window length: Length of the rbi window
%type: 1=vector; 2= matrixè 3= 3D matrix
%dim: dimension of the table corresponding to time

dimension=size(data);

if type == 3
    
fdata(1:dimension(1),1:dimension(2),1:dimension(3))=nan;

    if dim == 1
        
        fdata(1:floor(windowlength/2),:,:)=mean(data(1:windowlength,:,:),dim);
        fdata(dureecycle-floor(windowlength/2):dureecycle,:,:)=mean(data(1:windowlength,:,:),dim);

    
clear s


for i=5:lenght-4
    
    s=['fdata(:,i-4)=mean(abs(data(',num2str(numSignal),',i-4:i+4)),2);'];eval(s);
        
end

%----------------%
% Enregistrer
%----------------%
cd(pn); %On va dans le repertoire du sujet traité

% Enregistrement des données
[outfn,outpn]=uiputfile([fn]);
save([outpn,outfn],'data','fdata','Signal');



